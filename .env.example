# ============================================================
# 実行環境 (APP_ENV)
# ============================================================
# アプリケーションの実行環境を指定する
# - development (または dev): 開発モード
#     - Starlette デバッグモードが有効になる（詳細なエラー表示）
#     - ログレベルのデフォルトが DEBUG になる（LOG_LEVEL 未設定時）
# - production (デフォルト): 本番モード
#     - デバッグモード無効、ログレベルのデフォルトは INFO
APP_ENV=production

# ============================================================
# 取り込み設定 (Ingestion Configuration)
# ============================================================
# true に設定すると Langflow による取り込みを無効化し、従来の OpenRAG プロセッサを使用する
# 未設定または false の場合、Langflow パイプラインが使用される（デフォルト: アップロード → 取り込み → 削除）
DISABLE_INGEST_WITH_LANGFLOW=false

# false に設定するとスタートアップ時のサンプルデータ（PDF）の取り込みをスキップする
# デフォルト: true
INGEST_SAMPLE_DATA=true

# Langflow HTTP タイムアウト設定（秒単位）
# 大容量ドキュメント（300ページ以上）の場合、取り込みに30分以上かかることがある
# 非常に大きな PDF でタイムアウトが発生する場合はこれらの値を増やすこと
# デフォルト: 合計タイムアウト 2400秒（40分）、接続タイムアウト 30秒
# LANGFLOW_TIMEOUT=2400
# LANGFLOW_CONNECT_TIMEOUT=30

# 任意: ドキュメント取り込みタスクのファイルごとの処理タイムアウト（秒単位）
# 長時間の取り込みを完了させるため LANGFLOW_TIMEOUT 以上に設定すること
# デフォルト: 合計タイムアウト 3600秒（60分）
# INGESTION_TIMEOUT=3600

# 任意: フォルダー経由でナレッジを追加する際、タスクごとにアップロード／取り込みする最大ファイル数（バッチ）
# デフォルト: 25
# UPLOAD_BATCH_SIZE=25

# 以下のドキュメントを参照して作成してください: https://docs.langflow.org/api-keys-and-authentication#langflow-secret-key（必須）
LANGFLOW_SECRET_KEY=

# チャットおよび取り込みフローのフロー ID
LANGFLOW_CHAT_FLOW_ID=1098eea1-6649-4e1d-aed1-b77249fb8dd0
LANGFLOW_INGEST_FLOW_ID=5488df7c-b93f-4f87-a446-b67028bc0813
LANGFLOW_URL_INGEST_FLOW_ID=72c3d17c-2dac-4a73-b48a-6518473d7830
# docling を使用した取り込みフロー
# LANGFLOW_INGEST_FLOW_ID=1402618b-e6d1-4ff2-9a11-d6ce71186915
NUDGES_FLOW_ID=ebc01d31-1976-46ce-a385-b0240327226c

# OpenSearch の強力な管理者パスワードを設定する。コンテナ起動時にこの値から bcrypt ハッシュが生成される。（必須）
# 実際のシークレットをコミットしないこと。
# secureconfig 内のハッシュ済みパスワードと一致させること。安全なデプロイのために必ず変更すること！！！
# 注意: 手動で設定する場合は複雑なパスワードを使用すること:
# パスワードは8文字以上で、大文字・小文字・数字・特殊文字をそれぞれ1文字以上含む必要がある。
OPENSEARCH_PASSWORD=

# OpenSearch データ（インデックス、ドキュメント、クラスター状態）を永続化するパス
# デフォルト: ./opensearch-data
OPENSEARCH_DATA_PATH=./opensearch-data

# ドキュメントを保存する OpenSearch インデックス名
# デフォルト: documents
# 別のインデックス名を使用したい場合や競合を避けたい場合は変更すること
OPENSEARCH_INDEX_NAME=documents

# こちらで作成してください: https://console.cloud.google.com/apis/credentials
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=

# SharePoint/OneDrive 用の Azure アプリ登録資格情報
MICROSOFT_GRAPH_OAUTH_CLIENT_ID=
MICROSOFT_GRAPH_OAUTH_CLIENT_SECRET=

# S3 インスタンスへのアクセス権を持つ AWS アクセスキー ID とシークレットアクセスキー
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# 任意: 継続的な取り込みを処理するために Google 等からルーティング可能な DNS（ngrok 等が使用可能）。これにより継続的な取り込みが有効になる
WEBHOOK_BASE_URL=

# モデルプロバイダーの API キー（以下のうち少なくとも1つは必須）
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
OLLAMA_ENDPOINT=
WATSONX_API_KEY=
WATSONX_ENDPOINT=
WATSONX_PROJECT_ID=

# LLM プロバイダー設定。プロバイダーには "anthropic"、"watsonx"、"ibm"、"ollama" が指定可能。（必須）
LLM_PROVIDER=
LLM_MODEL=

# 埋め込みプロバイダー設定。プロバイダーには "watsonx"、"ibm"、"ollama" が指定可能。（必須）
EMBEDDING_PROVIDER=
EMBEDDING_MODEL=

# ポート設定
# システム上の他のサービスとポートが競合する場合はこれらの値を変更すること
# デフォルトポート: フロントエンド=3000、Langflow=7860
FRONTEND_PORT=3000
LANGFLOW_PORT=7860
# 任意: UI 内の OpenRAG から Langflow へのリンク URL
# LANGFLOW_PORT を変更した場合は LANGFLOW_PUBLIC_URL も新しいポートに合わせて更新すること（例: http://localhost:7861）
LANGFLOW_PUBLIC_URL=

# 任意: docling-serve の完全な URL を上書きする（例: リモートインスタンスの場合）
# 未設定の場合、ホストを自動検出してポート 5001 を使用する
# DOCLING_SERVE_URL=http://my-docling-server:5001

# 任意: docling サービスのホストを上書きする（特殊なネットワーク設定の場合）
# HOST_DOCKER_INTERNAL=host.containers.internal

# Langflow 認証設定
LANGFLOW_AUTO_LOGIN=False
LANGFLOW_SUPERUSER=           # LANGFLOW_AUTO_LOGIN=False の場合は必須
LANGFLOW_SUPERUSER_PASSWORD=  # LANGFLOW_AUTO_LOGIN=False の場合は必須
LANGFLOW_NEW_USER_IS_ACTIVE=False
LANGFLOW_ENABLE_SUPERUSER_CLI=False

# Langfuse トレーシング（任意）
# キーは https://cloud.langfuse.com またはセルフホスト環境から取得してください
LANGFUSE_SECRET_KEY=
LANGFUSE_PUBLIC_KEY=
# Langfuse Cloud の場合は空のまま。セルフホストの場合は設定すること（例: http://localhost:3002）
# Docker ネットワーク外でのセルフホスト例: LANGFUSE_HOST=http://host.docker.internal:3000
LANGFUSE_HOST=

# 任意: 開発モード専用の設定値。Next.js 開発サーバー（next dev）へのリクエストを許可する追加オリジン（ドメイン/ホスト）を指定する。
# - カンマ区切りのホスト名リストを指定可能
# - 例: 9.46.110.49,10.21.103.227,openrag.example.com
NEXT_ALLOWED_DEV_ORIGINS=

# 任意: 並行リクエスト処理のワーカープロセス数
# - スループットを上げるには増やすこと。ただし CPU / メモリの制約を考慮すること
# MAX_WORKERS=4         # バックエンド取り込みワーカー数（デフォルト: min(4, CPU数 // 2)）
# LANGFLOW_WORKERS=2    # Langflow ワーカー数（デフォルト: 1）
# DOCLING_WORKERS=2     # Docling ワーカー数（デフォルト: 1）

# 任意: バックエンドサービスのログレベルを設定する
# - 指定可能な値: DEBUG、INFO、WARNING、ERROR、CRITICAL
# - デフォルト: INFO
# LOG_LEVEL=DEBUG

# 任意: カラーログ出力を無効化する（https://no-color.org）
# - 値が設定されると（任意の値）、ログ出力から ANSI カラーコードが省略される
# NO_COLOR=1

# 任意: HTTP アクセスログイベントの有効/無効を設定する
# - 例: INFO:     127.0.0.1:45132 - "GET /tasks HTTP/1.1" 200 OK
# - デフォルト: true
# ACCESS_LOG=false

# ============================================================
# Watson News — watsonx.ai (on-prem OCP)
# ============================================================
# オンプレミスの watsonx.ai / Cloud Pak for Data インスタンスのベース URL
WATSONX_API_URL=
# CP4D プラットフォームから取得した API キー（プロフィール → API キー）
# WATSONX_API_KEY は上記の既存の watsonx LLM プロバイダーでも使用される
# CP4D ICP4D 認証エンドポイント
WATSONX_AUTH_URL=
# API バージョン日付文字列（例: 2025-02-06）
WATSONX_API_VERSION=2025-02-06
# false に設定すると SSL 証明書の検証をスキップする（OCP の自己署名証明書の場合）
WATSONX_SSL_VERIFY=true
# CA バンドル PEM ファイルへのパス（システム CA を使用する場合は空のまま）
WATSONX_CA_BUNDLE_PATH=
# CP4D のユーザー名とパスワード（ベアラートークンの取得に使用）
WATSONX_USERNAME=
WATSONX_PASSWORD=
# watsonx.ai プロジェクト ID
# WATSONX_PROJECT_ID は上記の既存の watsonx LLM プロバイダーでも使用される

# Watson News LLM（エンリッチメント: 要約、感情分析、エンティティ、トピック）
# デフォルト: openai/gpt-oss-120b（.creds_example の WATSONX_LLM_ID1）
WATSON_NEWS_ENRICH_MODEL=openai/gpt-oss-120b

# Watson News 埋め込みモデル
# デフォルト: ibm/granite-embedding-107m-multilingual（WATSONX_LLM_ID3）
WATSON_NEWS_EMBED_MODEL=ibm/granite-embedding-107m-multilingual

# ============================================================
# Watson News — GDELT
# ============================================================
# GDELT で検索するキーワード（デフォルト: IBM）
GDELT_QUERY_KEYWORD=IBM
# GDELT フェッチごとの最大記事数（デフォルト: 250）
GDELT_MAX_RECORDS=250
# GDELT タイムスパン（例: 15min、1d、1w）
GDELT_TIMESPAN=15min

# ============================================================
# Watson News — IBM official site crawler
# ============================================================
# デフォルトの ibm_crawl_targets.yaml を上書きする絶対パス
# 空のまま（watson-news/ibm_crawl_targets.yaml を使用）にすると、デフォルトが使用される
WATSON_NEWS_CRAWL_CONFIG=
# IBM クローラーが送信する User-Agent 文字列
IBM_CRAWL_USER_AGENT=WatsonNewsBot/1.0

# ============================================================
# Watson News — Box connector (OAuth 2.0)
# ============================================================
# Box OAuth 2.0 アプリケーション資格情報（https://app.box.com/developers/console で作成）
BOX_OAUTH_CLIENT_ID=
BOX_OAUTH_CLIENT_SECRET=
# インデックス対象の Box フォルダー ID（0 = ルート）
BOX_TARGET_FOLDER_ID=0
# Box OAuth トークンをキャッシュするパス（相対または絶対）
BOX_TOKEN_FILE=box_token.json
