# ============================================================
# Box RAG Service — Environment Variables
# ============================================================
# Copy this file to box-rag/.env and fill in your values.
# Values are sourced from .creds_example in the project root.
# ============================================================

# ── watsonx.ai (OCP on-premise) ─────────────────────────────
WATSONX_API_URL=https://cpd-cpd.apps.watsonx2.lab.japan.ibm.com
WATSONX_API_KEY=
WATSONX_AUTH_URL=https://cpd-cpd.apps.watsonx2.lab.japan.ibm.com/icp4d-api/v1/authorize
WATSONX_API_VERSION=2025-02-06
WATSONX_PROJECT_ID=

# ICP4D credentials (used when WATSONX_API_KEY is empty)
WATSONX_USERNAME=
WATSONX_PASSWORD=

# SSL verification for self-signed OCP certs
# Set to false to disable SSL verification (equivalent to verify=False)
WATSONX_SSL_VERIFY=false
# Optional: path to CA bundle PEM file (leave empty to use WATSONX_SSL_VERIFY=false)
WATSONX_CA_BUNDLE_PATH=

# Model selection
WATSONX_LLM_ID1=openai/gpt-oss-120b
WATSONX_LLM_ID3=ibm/granite-embedding-107m-multilingual

# ── OpenSearch (shared with OpenRAG) ─────────────────────────
OPENSEARCH_HOST=opensearch
OPENSEARCH_PORT=9200
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=
OPENSEARCH_USE_SSL=true
OPENSEARCH_VERIFY_CERTS=false

# Box RAG specific OpenSearch index names (do not conflict with OpenRAG's "documents" index)
BOX_DOCUMENTS_INDEX=box_documents
BOX_CHUNKS_INDEX=box_chunks

# ── Box API ───────────────────────────────────────────────────
# Auth mode: none | ccg | jwt
#   none = public shared links only (no Box account needed)
#   ccg  = Client Credentials Grant (server-to-server, no user consent)
#   jwt  = JWT auth (recommended for production)
BOX_AUTH_MODE=none

BOX_CLIENT_ID=
BOX_CLIENT_SECRET=
BOX_ENTERPRISE_ID=

# JWT-specific (only needed when BOX_AUTH_MODE=jwt)
# Paste private key as single line with \n escaped, or mount a file
BOX_JWT_PRIVATE_KEY=
BOX_JWT_PRIVATE_KEY_PASSPHRASE=
BOX_JWT_PUBLIC_KEY_ID=

# ── Docling ───────────────────────────────────────────────────
# If set, uses the Docling serve HTTP API for text extraction.
# Leave empty to use the docling Python library (requires docling installed).
# Point to OpenRAG's docling serve if running:
# DOCLING_SERVE_URL=http://docling:5001
DOCLING_SERVE_URL=

# ── Chunking ──────────────────────────────────────────────────
CHUNK_SIZE=512
CHUNK_OVERLAP=64

# ── Application ───────────────────────────────────────────────
LOG_LEVEL=INFO
BOX_RAG_PORT=8100

# ── RAG parameters ────────────────────────────────────────────
RAG_TOP_K=5
RAG_MAX_TOKENS=1024
