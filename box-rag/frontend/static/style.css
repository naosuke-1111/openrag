/* ── Reset & base ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --brand:    #0f62fe;
  --brand-dk: #0043ce;
  --bg:       #f4f4f4;
  --surface:  #ffffff;
  --border:   #e0e0e0;
  --text:     #161616;
  --muted:    #6f6f6f;
  --success:  #24a148;
  --warn:     #f1c21b;
  --error:    #da1e28;
  --radius:   4px;
}

body {
  font-family: 'IBM Plex Sans', 'Noto Sans JP', system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.5;
}

/* ── Header ── */
header {
  background: var(--brand);
  color: #fff;
  padding: 0 1.5rem;
}
.header-inner {
  max-width: 960px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  gap: 1rem;
  height: 56px;
}
header h1 { font-size: 1.1rem; font-weight: 600; white-space: nowrap; }
.header-subtitle { font-size: .8rem; opacity: .8; flex: 1; }

nav { display: flex; gap: 4px; }
.nav-btn {
  background: transparent;
  border: none;
  color: rgba(255,255,255,.7);
  padding: .4rem .9rem;
  cursor: pointer;
  font-size: .85rem;
  border-radius: var(--radius);
  transition: background .15s, color .15s;
}
.nav-btn:hover  { background: rgba(255,255,255,.15); color: #fff; }
.nav-btn.active { background: rgba(255,255,255,.25); color: #fff; }

/* ── Main ── */
main {
  max-width: 960px;
  margin: 2rem auto;
  padding: 0 1rem;
}

.tab { display: none; }
.tab.active { display: block; }

/* ── Card ── */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem;
}
.card h2 { font-size: 1.1rem; margin-bottom: 1.2rem; }
.card h3 { font-size: 1rem; margin-bottom: .8rem; }

/* ── Form elements ── */
.field-label { display: block; font-size: .85rem; font-weight: 600; margin-bottom: .3rem; }
.required { color: var(--error); }
.mt { margin-top: 1rem; }

.input-full {
  width: 100%;
  padding: .55rem .75rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  font-size: .9rem;
  outline: none;
  transition: border-color .15s;
}
.input-full:focus { border-color: var(--brand); }

.input-filter {
  padding: .4rem .65rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  font-size: .85rem;
  outline: none;
}
.input-filter:focus { border-color: var(--brand); }

.field-error {
  color: var(--error);
  font-size: .8rem;
  margin-top: .3rem;
}
.hidden { display: none !important; }

/* ── Tags ── */
.tag-list { display: flex; flex-wrap: wrap; gap: .4rem; margin-top: .5rem; }
.tag {
  display: inline-flex;
  align-items: center;
  gap: .3rem;
  background: #e8f0fe;
  color: var(--brand-dk);
  font-size: .78rem;
  padding: .2rem .55rem;
  border-radius: 99px;
}
.tag-remove {
  cursor: pointer;
  font-size: .9rem;
  line-height: 1;
  color: var(--brand);
}
.tag-remove:hover { color: var(--error); }

/* ── Buttons ── */
.btn {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .55rem 1.1rem;
  border: none;
  border-radius: var(--radius);
  font-size: .9rem;
  cursor: pointer;
  transition: background .15s;
}
.btn:disabled { opacity: .5; cursor: not-allowed; }
.btn-primary { background: var(--brand); color: #fff; }
.btn-primary:hover:not(:disabled) { background: var(--brand-dk); }
.btn-ghost  { background: transparent; border: 1px solid var(--border); color: var(--text); }
.btn-ghost:hover  { background: var(--bg); }
.btn-danger { background: var(--error); color: #fff; }
.btn-sm { padding: .3rem .7rem; font-size: .8rem; }

.action-bar { display: flex; justify-content: space-between; align-items: center; margin-top: 1rem; }

/* ── File tree ── */
.file-tree {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  max-height: 400px;
  overflow-y: auto;
  margin-bottom: 1rem;
}
.tree-item {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .4rem .75rem;
  border-bottom: 1px solid var(--border);
  font-size: .85rem;
}
.tree-item:last-child { border-bottom: none; }
.tree-item:hover { background: var(--bg); }
.tree-item.folder { font-weight: 600; background: #fafafa; }
.tree-item input[type=checkbox] { accent-color: var(--brand); }
.item-icon { font-size: 1rem; }
.item-meta { margin-left: auto; font-size: .75rem; color: var(--muted); white-space: nowrap; }
.indent-1 { padding-left: 2rem; }
.indent-2 { padding-left: 3.5rem; }
.indent-3 { padding-left: 5rem; }

.selection-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: .5rem;
}
.badge {
  font-size: .78rem;
  background: #e0e0e0;
  border-radius: 99px;
  padding: .15rem .65rem;
}

/* ── Progress ── */
.progress-bar-wrap {
  background: var(--border);
  border-radius: 99px;
  height: 10px;
  margin: .8rem 0 .4rem;
  overflow: hidden;
}
.progress-bar {
  background: var(--brand);
  height: 100%;
  border-radius: 99px;
  transition: width .4s;
}
.error-list {
  margin-top: .8rem;
  background: #fff8f8;
  border: 1px solid #ffd7d9;
  border-radius: var(--radius);
  padding: .75rem;
  font-size: .82rem;
}
.error-list ul { padding-left: 1.2rem; }

/* ── Documents list ── */
.filter-bar { display: flex; gap: .5rem; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; }
.doc-list { display: flex; flex-direction: column; gap: .5rem; }
.doc-card {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .75rem 1rem;
  display: flex;
  align-items: flex-start;
  gap: 1rem;
}
.doc-info { flex: 1; }
.doc-name { font-weight: 600; font-size: .9rem; }
.doc-tags { margin-top: .25rem; }
.doc-meta { font-size: .75rem; color: var(--muted); margin-top: .25rem; }
.status-badge {
  font-size: .72rem;
  font-weight: 600;
  padding: .15rem .55rem;
  border-radius: 99px;
}
.status-indexed { background: #defbe6; color: #0e6027; }
.status-pending  { background: #fff8e1; color: #7c5e00; }
.status-failed   { background: #fff1f1; color: #a2191f; }
.muted { color: var(--muted); font-size: .85rem; }

/* ── Search ── */
.search-bar { display: flex; flex-direction: column; gap: .5rem; }
.search-options { font-size: .85rem; display: flex; gap: 1rem; }
.search-results { margin-top: 1.5rem; }
.answer-box {
  background: #edf4ff;
  border: 1px solid #a6c8ff;
  border-radius: var(--radius);
  padding: 1rem;
  margin-bottom: 1.2rem;
  white-space: pre-wrap;
}
.answer-box h3 { font-size: .9rem; color: var(--brand-dk); margin-bottom: .5rem; }
#answer-text { font-size: .9rem; line-height: 1.7; }
.chunk-card {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .75rem;
  margin-bottom: .6rem;
  font-size: .83rem;
}
.chunk-meta { color: var(--muted); margin-bottom: .4rem; font-size: .78rem; }
.chunk-text {
  white-space: pre-wrap;
  max-height: 160px;
  overflow-y: auto;
  background: var(--bg);
  padding: .5rem;
  border-radius: 2px;
}
