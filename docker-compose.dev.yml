# 開発用 Docker Compose - Langflow をソースからビルドする
# 使用方法: GIT_BRANCH=test-openai-responses docker compose -f docker-compose.yml -f docker-compose.gpu.yml -f docker-compose.dev.yml up -d
# 使用方法（CPU のみ）: GIT_BRANCH=test-openai-responses docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d
# または Make コマンドを使用: make dev-branch BRANCH=test-openai-responses
# Make コマンド（CPU のみ）: make dev-branch-cpu BRANCH=test-openai-responses

services:
  langflow:
    build:
      context: .
      dockerfile: Dockerfile.langflow.dev
      args:
        GIT_REPO: ${GIT_REPO:-https://github.com/langflow-ai/langflow.git}
        GIT_BRANCH: ${GIT_BRANCH:-main}
      # ビルドのメモリを増やす（npm ビルドはメモリを多く使用する）
      shm_size: '2gb'